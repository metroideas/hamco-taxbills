{"version":3,"sources":["chart.js"],"names":["window","document","d3","data","draw","container","querySelector","chart","mobile","offsetWidth","margin","top","right","bottom","left","width","this","height","ratio","f","Math","round","yearScale","scaleBand","domain","taxbills","map","d","year","appraisalScale","scaleLinear","max","appraisal","range","padding","axis","axisTop","tickSize","axisLeft","tickArguments","format","innerHTML","svg","select","append","attr","call","remove","bars","selectAll","enter","labels","text","bandwidth","onload","onresize"],"mappings":"CAAA,SAAUA,EAAQC,EAAUC,EAAIC,GAO9B,QAASC,KACP,GAAIC,GAAYJ,EAASK,cAAc,YACnCC,EAAQF,EAAUC,cAAc,UAGhCE,GAAWH,EAAUI,aAAe,IAKpCC,GACFC,IAAK,GACLC,MAAO,GACPC,OAAQ,GACRC,KAAM,EAAW,GAAK,GACtBC,MAAO,WAAa,MAAOC,MAAKJ,MAAQI,KAAKF,MAC7CG,OAAQ,WAAa,MAAOD,MAAKL,IAAMK,KAAKH,SAI1CK,EAAS,GAAaH,MAAO,EAAGE,OAAQ,IAAQF,MAAO,EAAGE,OAAQ,GAGlEF,EAAQ,WACV,OAAQV,EAAUI,YAAcC,EAAOK,WAIrCE,EAAS,WACX,GAAIE,GAAID,EAAMD,OAASC,EAAMH,KAE7B,OAAOK,MAAKC,MAAMN,EAAQI,EAAIT,EAAOO,aAInCK,EAAYpB,EAAGqB,YACdC,OAAOrB,EAAKsB,SAASC,IAAI,SAASC,GAAK,MAAOA,GAAEC,QAEjDC,EAAiB3B,EAAG4B,cACnBN,QAAQ,EAAGtB,EAAG6B,IAAI5B,EAAKsB,SAAU,SAASE,GAAK,MAAOA,GAAEK,aAE7D,IAAIxB,EAAQ,CACVc,EAAUW,OAAO,EAAGhB,IACjBiB,QAAQ,IAEXL,EAAeI,OAAO,EAAGlB,GAEzB,IAAIoB,GAAOjC,EAAGkC,QAAQP,GAEnBQ,UAAUpB,EAAQ,EAAG,OACnB,CACLK,EAAUW,OAAO,EAAGlB,IACjBmB,QAAQ,KAEXL,EAAeI,OAAOhB,EAAQ,GAE9B,IAAIkB,GAAOjC,EAAGoC,SAAST,GACpBQ,UAAUtB,EAAO,EAAG,GAGzBoB,EAAKI,eAAe,EAAGrC,EAAGsC,OAAO,UAGjCjC,EAAMkC,UAAY,EAElB,IAAIC,GAAMxC,EAAGyC,OAAOpC,GAAOqC,OAAO,OAC7BC,KAAK,QAAS9B,EAAQL,EAAOK,SAC7B8B,KAAK,SAAU5B,EAASP,EAAOO,UACjC2B,OAAO,KACLC,KAAK,YAAa,aAAenC,EAAOI,KAAO,IAAMJ,EAAOC,IAAM,IAGvE+B,GAAIE,OAAO,KACRC,KAAK,QAAS,QACdC,KAAKX,GAERO,EAAIC,OAAO,oCAAoCI,QAG/C,IAAIC,GAAON,EAAIE,OAAO,KAAKC,KAAK,QAAS,QACtCI,UAAU,eACR9C,KAAKA,EAAKsB,UACZyB,QAAQN,OAAO,KACbC,KAAK,QAAS,YAGnBG,GAAKH,KAAK,YAAa,SAASlB,GAC9B,MAAO,GACH,eAAiBL,EAAUK,EAAEC,MAAQ,IACrC,aAAeN,EAAUK,EAAEC,MAAQ,OAGzC,IAAIuB,GAASH,EAAKJ,OAAO,QACtBC,KAAK,QAAS,SACdO,KAAK,SAASzB,GAAK,MAAOA,GAAEC,MAG3BpB,IAEF2C,EAAON,KAAK,YACV,cAAgBnC,EAAOI,KAAO,IAAMQ,EAAU+B,YAAc,EAAI,KAC/DR,KAAK,oBAAqB,UAE7BG,EAAKJ,OAAO,QACTC,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,SAAUvB,EAAU+B,aACzBR,KAAK,QAAS,SAASlB,GAAK,MAAOE,GAAeF,EAAEK,eAIvDmB,EAAON,KAAK,YAAa,SAASlB,GAChC,MAAO,aAAeL,EAAU+B,YAAc,EAAI,KAAOpC,EAASP,EAAOG,OAAS,GAAK,MACtFgC,KAAK,cAAe,UAEvBG,EAAKJ,OAAO,QACTC,KAAK,IAAK,GACVA,KAAK,IAAK,SAASlB,GAAK,MAAOE,GAAeF,EAAEK,aAChDa,KAAK,SAAU,SAASlB,GAAK,MAAOV,GAASY,EAAeF,EAAEK,aAC9Da,KAAK,QAASvB,EAAU+B,cA5H3BnD,IACFF,EAAOsD,OAASlD,EAChBJ,EAAOuD,SAAWnD,IA+HnBJ,OAAQC,SAAUC,GAAIC","file":"chart.min.js","sourcesContent":["(function(window, document, d3, data) {\n  // Replace fallback image with dynamic graphic if d3 library is present\n  if (d3) {\n    window.onload = draw;\n    window.onresize = draw;  \n  }\n  \n  function draw() {\n    var container = document.querySelector(\"#graphic\")\n    var chart = container.querySelector(\".chart\");\n    \n    // Container size boolean flips orientation\n    var mobile = (+container.offsetWidth <= 768);\n\n    // Dimensions\n    // ---------------------------------------------------------------------------\n    // Conventional margins\n    var margin = {\n      top: 32,\n      right: 16,\n      bottom: 32,\n      left: (mobile) ? 32 : 40,\n      width: function() { return this.right + this.left; },\n      height: function() { return this.top + this.bottom; }\n    };\n\n    // Aspect ratio\n    var ratio  = (mobile) ? { width: 1, height: 2 } : { width: 8, height: 3 };\n\n    // Chart width minus left/right margin\n    var width = function() {\n      return +container.offsetWidth - margin.width();\n    }();\n\n    // Chart height minus top/bottom margin\n    var height = function() {\n      var f = ratio.height / ratio.width;\n\n      return Math.round(width * f - margin.height());\n    }();\n\n    // Orientation-based scales and axes\n    var yearScale = d3.scaleBand()\n        .domain(data.taxbills.map(function(d) { return d.year; }));\n\n    var appraisalScale = d3.scaleLinear()\n        .domain([0, d3.max(data.taxbills, function(d) { return d.appraisal; })]);\n\n    if (mobile) {\n      yearScale.range([0, height])\n        .padding(0.1);\n\n      appraisalScale.range([0, width]);\n\n      var axis = d3.axisTop(appraisalScale)\n        \n        .tickSize(-height, 0, 0)\n    } else {\n      yearScale.range([0, width])\n        .padding(0.25);\n\n      appraisalScale.range([height, 0])\n\n      var axis = d3.axisLeft(appraisalScale)\n        .tickSize(-width, 0, 0);\n    }\n\n    axis.tickArguments([4, d3.format(\"$.0s\")]);\n    \n    // Chart setup\n    chart.innerHTML = \"\";\n\n    var svg = d3.select(chart).append(\"svg\")\n        .attr(\"width\", width + margin.width())\n        .attr(\"height\", height + margin.height())\n      .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    // Draw axis\n    svg.append(\"g\")\n      .attr(\"class\", \"axis\")\n      .call(axis);\n\n    svg.select(\"g.axis g.tick:first-of-type text\").remove();\n\n    // Bar groups binded to taxbill data\n    var bars = svg.append(\"g\").attr(\"class\", \"bars\")\n      .selectAll(\"g.bar-group\")\n        .data(data.taxbills)\n      .enter().append(\"g\")\n        .attr(\"class\", \"bar-group\");\n\n    // Placement transform: Has to occur before label assignment\n    bars.attr(\"transform\", function(d) {\n      return (mobile)\n        ? \"translate(0,\" + yearScale(d.year) + \")\"  // Vertical\n        : \"translate(\" + yearScale(d.year) + \",0)\"; // Horizontal\n    });\n\n    var labels = bars.append(\"text\")\n      .attr(\"class\", \"label\")\n      .text(function(d) { return d.year; });\n\n    // Bar groups: Orientation-based labels and rects\n    if (mobile) {\n\n      labels.attr(\"transform\",\n        \"translate(\" + -margin.left + \",\" + yearScale.bandwidth() / 2 + \")\")\n        .attr(\"dominant-baseline\", \"middle\");\n\n      bars.append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"height\", yearScale.bandwidth())\n        .attr(\"width\", function(d) { return appraisalScale(d.appraisal); })\n\n    } else {\n\n      labels.attr(\"transform\", function(d) {\n        return \"translate(\" + yearScale.bandwidth() / 2 + \",\" + (height + margin.bottom / 2) + \")\"; })\n        .attr(\"text-anchor\", \"middle\");\n\n      bars.append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", function(d) { return appraisalScale(d.appraisal); })\n        .attr(\"height\", function(d) { return height - appraisalScale(d.appraisal); })\n        .attr(\"width\", yearScale.bandwidth());\n\n    }\n  }\n  \n})(window, document, d3, data);"],"sourceRoot":"/source/"}