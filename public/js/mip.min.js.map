{"version":3,"sources":["mip.js"],"names":["map","window","graphic","locationLookup","address","cb","api","request","XMLHttpRequest","open","onload","this","status","data","JSON","parse","response","onerror","send","form","document","getElementById","addEventListener","event","preventDefault","elements","value","errorField","innerHTML","err","loc","undefined","taxbills","update"],"mappings":"AAAA,GAAIA,KAAUC,OAAOD,QACjBE,QAAUD,OAAOC,aAErB,SAAUF,EAAKE,GA8Bb,QAASC,GAAeC,EAASC,GAC/B,GAAIC,GAAM,gBAAkBF,EAExBG,EAAU,GAAIC,eAElBD,GAAQE,KAAK,MAAOH,GAAK,GAEzBC,EAAQG,OAAS,WACf,GAAIC,KAAKC,QAAU,KAAOD,KAAKC,OAAS,IAAK,CAC3C,GAAIC,GAAOC,KAAKC,MAAMJ,KAAKK,SAC3BX,GAAG,KAAMQ,KAObN,EAAQU,QAAU,aAKlBV,EAAQW,OAnDV,GAAIC,GAAOC,SAASC,eAAe,iBAEnCF,GAAKG,iBAAiB,SAAU,SAASC,GACvCA,EAAMC,gBAEN,IAAIpB,GAAUe,EAAKM,SAAS,iBAAiBC,MACzCC,EAAaP,SAASC,eAAe,qBAEzCM,GAAWC,UAAY,GAEnBxB,IACFD,EAAeC,EAAS,SAASyB,EAAKC,GAChCD,IAKgBE,QAAhBD,EAAIE,UACNhC,EAAIiC,OAAOH,GACX5B,EAAQ+B,OAAOH,IAEfH,EAAWC,UAAY,mDAI3BT,EAAKM,SAAS,iBAAiBC,MAAQ,OA4B1C1B,IAAKE","file":"mip.min.js","sourcesContent":["var map     = window.map     || {};\nvar graphic = window.graphic || {};\n\n(function(map, graphic) {\n  var form = document.getElementById('address-lookup');\n\n  form.addEventListener('submit', function(event) {\n    event.preventDefault();\n\n    var address = form.elements['address-field'].value;\n    var errorField = document.getElementById('form-error-message');\n\n    errorField.innerHTML = \"\";\n\n    if (address) {\n      locationLookup(address, function(err, loc) {\n        if (err) {\n          // Error handling\n          return ;\n        }\n\n        if (loc.taxbills != undefined) {\n          map.update(loc);\n          graphic.update(loc); \n        } else {\n          errorField.innerHTML = \"Address not found. Please try another search.\"\n        }\n      })\n\n      form.elements['address-field'].value = \"\";\n    }\n  });\n\n  function locationLookup(address, cb) {\n    var api = '/api/address/' + address;\n\n    var request = new XMLHttpRequest();\n\n    request.open('GET', api, true);\n\n    request.onload = function() {\n      if (this.status >= 200 && this.status < 400) {\n        var data = JSON.parse(this.response);\n        cb(null, data);\n      } else {\n        // We reached our target server, but it returned an error\n        // Error handling\n      }\n    };\n\n    request.onerror = function() {\n      // There was a connection error of some sort\n      // Error handling\n    }\n\n    request.send();\n  }\n})(map, graphic);\n\n"],"sourceRoot":"/source/"}