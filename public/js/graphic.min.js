var graphic=window.graphic||{};!function(){function t(){var t,a=d3.scaleBand().domain(i.taxbills.map(function(t){return t.year})),e=d3.scaleLinear().domain([0,s]);return d?(a.range([0,f]).padding(.1),e.range([0,p]),t=d3.axisTop(e).tickSize(-f,0,0)):(a.range([0,p]).padding(.25),e.range([f,0]),t=d3.axisLeft(e).tickSize(-p,0,0)),t.tickArguments([4,d3.format("$.0s")]),{year:a,axis:t,appraisal:e}}function a(t){return t.appraisal.median||0}function e(t,e){var r=d3.select("#comparison-container").classed("hidden",!1);r.selectAll("p").remove();var n=r.selectAll("p").data(i.summaries).enter().append("p"),s=n.append("label");s.html(function(t){var a="<input type='checkbox' data-select='"+t.type+"'> ";return a+t.name}),d3.selectAll("input[type='checkbox']").on("change",function(){if(this.checked){var r=this.dataset.select,n=i.summaries.filter(function(t){return t.type==r})[0],s=d3.line().x(function(r){return d?t(a(r)):e(r.year)}).y(function(r){return d?e(r.year):t(a(r))});c.append("path").attr("class","summary "+r).datum(n.taxbills).attr("d",s).attr("transform",function(t){var a=e.bandwidth()/2;return d?"translate(0,"+a+")":"translate("+a+",0)"})}else{var s="path.summary."+this.dataset.select;d3.select(s).remove()}})}function r(t,e){var r=c.append("g").attr("class","bars").selectAll("g.bar-group").data(i.taxbills).enter().append("g").attr("class","bar-group");r.attr("transform",function(t){return d?"translate(0,"+e(t.year)+")":"translate("+e(t.year)+",0)"});var s=r.append("text").attr("class","label").text(function(t){return t.year});d?(s.attr("transform","translate("+-h.left+","+e.bandwidth()/2+")").attr("dominant-baseline","middle"),r.append("rect").attr("x",0).attr("y",0).attr("height",e.bandwidth()).attr("width",function(e){return t(a(e))})):(s.attr("transform",function(t){return"translate("+e.bandwidth()/2+","+(f+h.bottom/2)+")"}).attr("text-anchor","middle"),r.append("rect").attr("x",0).attr("y",function(e){return t(a(e))}).attr("height",function(e){return f-t(a(e))}).attr("width",e.bandwidth()).call(n))}function n(t){t.on("mouseover",function(t){var a=d3.select("#barchart-tooltip").classed("hidden",!1),e=d3.format("$,");a.select("#year").html(t.year),a.select("#appraisal-amount").html(e(t.appraisal.median)),a.select("#county-amount").html(e(t.county.median)),a.select("#municipality-amount").html(e(t.municipality.median));var r=this.getCTM().translate(+this.getAttribute("cx"),+this.getAttribute("cy"));a.style("left",function(){var t,e=+a.style("width").slice(0,-2),n=d3.event.pageX-e/2;return r.e<=.25*p?(t=(p-r.e)/p,n+=t*e/2):r.e>=.75*p&&(t=1-(p-r.e)/p,n-=t*e/2),n+"px"}),a.style("top",function(){var t=+a.style("height").slice(0,-2),e=d3.event.pageY;return e=r.f>=.5*f?e-1.5*t:e+15,e+"px"})}).on("mouseout",function(){d3.select("#barchart-tooltip").classed("hidden",!0)})}var i,s,c,l=document.querySelector("#graphic"),o=l.querySelector(".chart"),d=+l.offsetWidth<=768,u=d?{width:1,height:2}:{width:8,height:3},h={top:32,right:16,bottom:32,left:d?32:40,width:function(){return this.right+this.left},height:function(){return this.top+this.bottom}},p=+l.offsetWidth-h.width(),f=Math.round(p*(u.height/u.width)-h.height());graphic.draw=function(){var a=t(),n=a.appraisal,s=a.year,l=a.axis;o.innerHTML="",c=d3.select(o).append("svg").attr("width",p+h.width()).attr("height",f+h.height()).append("g").attr("transform","translate("+h.left+","+h.top+")"),c.append("g").attr("class","axis").call(l),c.select("g.axis g.tick:first-of-type text").remove(),r(n,s),i.summaries&&e(n,s)},graphic.update=function(t){graphic.data(t),graphic.draw()},graphic.data=function(t){i=t,"county"!=i.type&&(i.summaries=function(){return[i.county,i.municipality,i.countyDistrict,i.zipcode]}()),s=function(){function t(t,e){var r=d3.max(t,function(t){return a(t)});return e>r?e:r}var e=t(i.taxbills,0);for(var r in i)i[r].taxbills&&(e=t(i[r].taxbills,e));return e}()}}();
//# sourceMappingURL=graphic.min.js.map
