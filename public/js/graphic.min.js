var graphic=window.graphic||{};!function(){function t(){var t,a=d3.scaleBand().domain(n.taxbills.map(function(t){return t.year})),r=d3.scaleLinear().domain([0,i]);return o?(a.range([0,p]).padding(.1),r.range([0,h]),t=d3.axisTop(r).tickSize(-p,0,0)):(a.range([0,h]).padding(.25),r.range([p,0]),t=d3.axisLeft(r).tickSize(-h,0,0)),t.tickArguments([4,d3.format("$.0s")]),{year:a,axis:t,appraisal:r}}function a(t){return t.appraisal.median||0}function r(t,r){var e=d3.select("#comparison-container").classed("hidden",!1),i=e.selectAll("p").data(n.summaries).enter().append("p"),c=i.append("label");c.html(function(t){var a="<input type='checkbox' data-select='"+t.type+"'> ";return a+t.name}),d3.selectAll("input[type='checkbox']").on("change",function(){if(this.checked){var e=this.dataset.select,i=n.summaries.filter(function(t){return t.type==e})[0],c=d3.line().x(function(e){return o?t(a(e)):r(e.year)}).y(function(e){return o?r(e.year):t(a(e))});s.append("path").attr("class","summary "+e).datum(i.taxbills).attr("d",c).attr("transform",function(t){var a=r.bandwidth()/2;return o?"translate(0,"+a+")":"translate("+a+",0)"})}else{var c="path.summary."+this.dataset.select;d3.select(c).remove()}})}function e(t,r){var e=s.append("g").attr("class","bars").selectAll("g.bar-group").data(n.taxbills).enter().append("g").attr("class","bar-group");e.attr("transform",function(t){return o?"translate(0,"+r(t.year)+")":"translate("+r(t.year)+",0)"});var i=e.append("text").attr("class","label").text(function(t){return t.year});o?(i.attr("transform","translate("+-l.left+","+r.bandwidth()/2+")").attr("dominant-baseline","middle"),e.append("rect").attr("x",0).attr("y",0).attr("height",r.bandwidth()).attr("width",function(r){return t(a(r))})):(i.attr("transform",function(t){return"translate("+r.bandwidth()/2+","+(p+l.bottom/2)+")"}).attr("text-anchor","middle"),e.append("rect").attr("x",0).attr("y",function(r){return t(a(r))}).attr("height",function(r){return p-t(a(r))}).attr("width",r.bandwidth()))}var n,i,s,c=document.querySelector("#graphic"),d=c.querySelector(".chart"),o=+c.offsetWidth<=768,u=o?{width:1,height:2}:{width:8,height:3},l={top:32,right:16,bottom:32,left:o?32:40,width:function(){return this.right+this.left},height:function(){return this.top+this.bottom}},h=+c.offsetWidth-l.width(),p=Math.round(h*(u.height/u.width)-l.height());graphic.draw=function(){var a=t(),i=a.appraisal,c=a.year,o=a.axis;d.innerHTML="",s=d3.select(d).append("svg").attr("width",h+l.width()).attr("height",p+l.height()).append("g").attr("transform","translate("+l.left+","+l.top+")"),s.append("g").attr("class","axis").call(o),s.select("g.axis g.tick:first-of-type text").remove(),e(i,c),n.summaries&&r(i,c)},graphic.update=function(t){graphic.data(t),graphic.draw()},graphic.data=function(t){n=t,"county"!=n.type&&(n.summaries=function(){return[n.county,n.municipality,n.countyDistrict,n.zipcode]}()),i=function(){function t(t,r){var e=d3.max(t,function(t){return a(t)});return r>e?r:e}var r=t(n.taxbills,0);for(var e in n)n[e].taxbills&&(r=t(n[e].taxbills,r));return r}()}}();
//# sourceMappingURL=graphic.min.js.map
