var graphic=window.graphic||{};!function(){function t(){var t,e=d3.scaleBand().domain(i.taxbills.map(function(t){return t.year})),a=d3.scaleLinear().domain([0,s]);return d?(e.range([0,m]).padding(.1),a.range([0,p]),t=d3.axisTop(a).tickSize(-m,0,0)):(e.range([0,p]).padding(.25),a.range([m,0]),t=d3.axisLeft(a).tickSize(-p,0,0)),t.tickArguments([4,d3.format("$.0s")]),{year:e,axis:t,appraisal:a}}function e(t){return t.appraisal.median||0}function a(t,a){var r=d3.select("#comparison-container").classed("hidden",!1);r.selectAll("p").remove();var n=r.selectAll("p").data(i.summaries).enter().append("p").attr("class",function(t){return t.type}),s=n.append("label");s.html(function(t){var e="<input type='checkbox' data-select='"+t.type+"'> ",a="<svg width='24' height='18'><line x1='2' x2='20' y1='12' y2='12' /></svg>";return e+a+t.name}),d3.selectAll("input[type='checkbox']").on("change",function(){if(this.checked){var r=this.dataset.select,n=i.summaries.filter(function(t){return t.type==r})[0],s=d3.line().x(function(r){return d?t(e(r)):a(r.year)}).y(function(r){return d?a(r.year):t(e(r))});c.append("path").attr("class","summary "+r).datum(n.taxbills).attr("d",s).attr("transform",function(t){var e=a.bandwidth()/2;return d?"translate(0,"+e+")":"translate("+e+",0)"})}else{var s="path.summary."+this.dataset.select;d3.select(s).remove()}})}function r(t,a){var r=c.append("g").attr("class","bars").selectAll("g.bar-group").data(i.taxbills).enter().append("g").attr("class","bar-group");r.attr("transform",function(t){return d?"translate(0,"+a(t.year)+")":"translate("+a(t.year)+",0)"});var s=r.append("text").attr("class","label").text(function(t){return t.year});d?(s.attr("transform","translate("+-h.left+","+a.bandwidth()/2+")").attr("dominant-baseline","middle"),r.append("rect").attr("x",0).attr("y",0).attr("height",a.bandwidth()).attr("width",function(a){return t(e(a))})):(s.attr("transform",function(t){return"translate("+a.bandwidth()/2+","+(m+h.bottom/2)+")"}).attr("text-anchor","middle"),r.append("rect").attr("x",0).attr("y",function(a){return t(e(a))}).attr("height",function(a){return m-t(e(a))}).attr("width",a.bandwidth()).call(n))}function n(t){t.on("mouseover",function(t){var e=d3.select("#graphic-tooltip").classed("hidden",!1),a=d3.format("$,");e.select("#year").html(t.year),e.select("#appraisal-amount").html(a(t.appraisal.median)),e.select("#county-amount").html(a(t.county.median)),e.select("#municipality-amount").html(a(t.municipality.median));var r=this.getCTM().translate(+this.getAttribute("cx"),+this.getAttribute("cy"));e.style("left",function(){var t,a=+e.style("width").slice(0,-2),n=d3.event.pageX-a/2;return r.e<=.25*p?(t=(p-r.e)/p,n+=t*a/2):r.e>=.75*p&&(t=1-(p-r.e)/p,n-=t*a/2),n+"px"}),e.style("top",function(){var t=+e.style("height").slice(0,-2),a=d3.event.pageY;return a=r.f>=.5*m?a-1.5*t:a+15,a+"px"})}).on("mouseout",function(){d3.select("#graphic-tooltip").classed("hidden",!0)})}var i,s,c,l=document.querySelector("#graphic"),o=l.querySelector(".chart"),d=+l.offsetWidth<=768,u=d?{width:1,height:2}:{width:8,height:3},h={top:32,right:16,bottom:32,left:d?32:40,width:function(){return this.right+this.left},height:function(){return this.top+this.bottom}},p=+l.offsetWidth-h.width(),m=Math.round(p*(u.height/u.width)-h.height());graphic.draw=function(){var e=t(),n=e.appraisal,s=e.year,d=e.axis;"Hamilton County"!=i.name&&(l.querySelector("#title").innerHTML=i.name),o.innerHTML="",c=d3.select(o).append("svg").attr("width",p+h.width()).attr("height",m+h.height()).append("g").attr("transform","translate("+h.left+","+h.top+")"),c.append("g").attr("class","axis").call(d),c.select("g.axis g.tick:first-of-type text").remove(),r(n,s),i.summaries&&a(n,s)},graphic.update=function(t){graphic.data(t),graphic.draw()},graphic.data=function(t){i=t,"county"!=i.type&&(i.summaries=function(){return[i.county,i.municipality,i.countyDistrict,i.zipcode]}()),s=function(){function t(t,a){var r=d3.max(t,function(t){return e(t)});return a>r?a:r}var a=t(i.taxbills,0);for(var r in i)i[r].taxbills&&(a=t(i[r].taxbills,a));return a}()}}();
//# sourceMappingURL=graphic.min.js.map
